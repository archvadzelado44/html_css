function popup(p,o,e,t,i){var a=$(".popup").length,d=null!=t&&null!=t.height?"height:"+t.height+"px;":"";form='<div class="popup '+(null!=t&&null!=t.class?t.class:"")+'" id="'+a+'" style="z-index:'+maxZ()+';"'+(i?' onClick="closePopup('+a+', event);"':"")+'><div class="popup_container_block" style="width:'+($(window).width()-popupData.data.scrollbarSize)+"px;height:"+($(window).height()-popupData.data.scrollbarSize)+'px;"><div class="popup_container" style="max-height:'+($(window).height()-popupData.data.scrollbarSize)+"px;"+d+'"><div class="popup_content"><div class="popup_body"><div class="popup_loader"><div class="popup_loader_img"></div><div class="popup_loader_text">Loading...</div></div></div><a class="popup_close shadow-inset" title="'+langs.Close+'"'+(i?"":' onClick="closePopup('+a+');"')+'><i class="icon-16 close-1-16"></i></a></div></div></div></div>',$("body").append(form),show_popup(a),$("body").addClass("popup_active_body"),$.get(p,o,function(p){$(".popup[id="+a+"] .popup_body").html(p),popup_window_reize[a](),"function"==typeof e&&e()}),popup_window_reize[a]=function(){$(".popup[id="+a+"] .popup_container_block").width($(window).width()-popupData.data.scrollbarSize).height($(window).height()-popupData.data.scrollbarSize),$(".popup[id="+a+"] .popup_container_block .popup_container").attr("style","max-height:"+($(window).height()-popupData.data.scrollbarSize)+"px;"+d)},$(window).bind("resize",popup_window_reize[a])}function show_popup(p){$(".popup[id="+p+"]").animate({opacity:1},300)}function hide_popup(p){$(".popup[id="+p+"]").remove()}function close_popup(p){var p=p||$(".popup").length-1;$(".popup[id="+p+"]").remove(),p||$("body").removeClass("popup_active_body"),event.preventDefault()||event.stopPropagation()}function closePopup(p,o){if(null!=o&&-1==["popup_container_block","popup_container","popup_close shadow-inset","icon-16 close-1-16"].indexOf(o.target.className))return!1;try{delete popupData.data.actProgressID}catch(p){}var p=p||$(".popup").length-1;$(".popup[id="+p+"]").remove(),p||$("body").removeClass("popup_active_body");try{o.preventDefault()||o.stopPropagation()}catch(p){}}function show_popup_under(){var p=$(".popup_under").length;$("body").append('<div class="popup_under" id="'+p+'" style="z-index:'+maxZ()+'"></div>'),$(".popup_under[id="+p+"]").css({height:getDocHeight(),width:getDocWidth()}).fadeIn(200)}function hide_popup_under(p){$(".popup_under[id="+p+"]").remove()}function getScrollbarWidth(){var p=document.createElement("div");p.style.visibility="hidden",p.style.width="100px",p.style.msOverflowStyle="scrollbar",document.body.appendChild(p);var o=p.offsetWidth;p.style.overflow="scroll";var e=document.createElement("div");e.style.width="100%",p.appendChild(e);var t=e.offsetWidth;return p.parentNode.removeChild(p),o-t}var popupData={data:{actProgressID:null,scrollbarSize:getScrollbarWidth()},tags:{popupBody:".popup_body",popupContent:".popup-content"}},popup_window_reize=new Array;